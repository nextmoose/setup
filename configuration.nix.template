{ config, pkgs, ... }:
{
  imports = [
    ./hardware-configuration.nix
  ];
  boot.initrd.network = {
    enable = true;
    ssh = {
      enable = true;
      hostRSAKey = ''
-----BEGIN RSA PRIVATE KEY-----
MIIEpQIBAAKCAQEA74DUO7Pfw+ton7P4hBrvnHPgmXTWmLPHGTkHccuXG7TJgU1M
t4M5deWTSiD2q0e5ZKQowGQ5HZ9zFt8ki0W8dq7NwCUMf73T5kolA6fXQcVrZyWW
ElsRUkFz4DTp8jwlz23o9rZ0jx9chD/dgm4R1efFgCPpYCKZTpGFZdts9U1kQFjy
QGY9/TPXbBAM6Zc03BO92pW55rELMpaD6zdFsxRQxi4vv72nRYY0MOxsNZ8CwR4G
crsSMpXSRLMNmI7fe1gh5VoDgU8t8P6NpEnf8gg6PDdMwywPwu1X0A0+svbKrepr
BbTP58SMcsCz68x393kFyXZ+l5pIXUp0YxkvQQIDAQABAoIBAQDH3tc+y6mdssMp
I+PtOx1jj0CMT/kWjlFFN1aDHMgKEyFmir/PFe/J98CnSEMSRVTuLCDmDb2sfvho
yeeRYq0YzmBeTYzUvfIsaQvitRrqhHpRJgjLYLxfzMeLAB2MTa2wIaUc3r7/AckP
hMyyoHC59iXX/iAwXi9aZg7RJgET49ipqsKQcJidK3Cn+7Fw9B3MurSyCYRcerI9
usY9UxpVe1EZWvB5GNOEtZckwamRX9b/sYGUeOPROGsyx+y52XnYcBq/6GbYGABS
2QLT2QL7XKEy8TkeyrXQHLpRRkpWHAMd3H31cCNnx0XWWYsJppoLXCFT9O9Uq251
UrGpxbHRAoGBAP50/x8tV3H81/BliukWCf5wYwp8jKytFFBTgH2ej3uSNF2IlQXU
kSkYBxuiaKGENc+XS1FNS0T1aS5A462flMGPPOZ8w4te6gHeec6REdMC8uIfmEdh
1+R4w/gR2DruzOOMPN66iEzYhD+g/5QrRahVlbxLVbuZgB47TDBNjLJzAoGBAPD0
nn/ff53vOietxXJnZmyesHzvnYOZ9yF4vb7jq0rYtWFw9JRqQniI7z9glVyf9FkB
OquujXny9Iaa0L51mx4eiX7seg212C+PaePEqGm0bQpNBxCJ/vn6juD/V3eHZX4W
KkNSKp3yPJXZrViUid1FtEU0Z6G22R/2cCTofEZ7AoGBAO0OFCt4c1HnS0lTYDE7
7f2TuEEpvWiVKiqXUEo3cNafY5eLycGPwdh14RFWoYFviS4ndex9RNUuiFml7DZx
SAV3KzZTH111BC7Pk8zki6V4xsvwwU4nEhlwhKlT/o0QseJ/YKnjP13QDIy2scPY
+GEVspSj3nASVjBT7+vEI4KPAoGAF7MXu+ARv0j+YVS4LO56pohdN4yh44XLRuGH
WDUwbeYuwOzJQafJ7e0aCxPG3RtmfzKdwLEkfTAmWO71RSZwIWBDidZckuil4Nes
RJjdL7htWSwGW9wW1iOM1hiHU9xfYS1w7rowMuTWjK6iXCoP/VGTz5K99qvzYy9s
DFVJk+0CgYEAz4/E3Ib5rD2zH0fTplqXfAXBi+JiUOPcfSvIPNQbcw6Et7B+Kgdw
l8srJQPeHFHuZf9wo6e2ZdGz5AtK7EYS7humCNE0Ll7GdgMx9tLyNplHTK2yPT0f
6szoiM4TYEfbuC3JsnuJSn7FDtSYCpWMsmU0Br/4ZJ5vn/nAQ/xrZrU=
-----END RSA PRIVATE KEY-----
      '';    
      hostDSSKey = ''
-----BEGIN RSA PRIVATE KEY-----
MIIEpQIBAAKCAQEA74DUO7Pfw+ton7P4hBrvnHPgmXTWmLPHGTkHccuXG7TJgU1M
t4M5deWTSiD2q0e5ZKQowGQ5HZ9zFt8ki0W8dq7NwCUMf73T5kolA6fXQcVrZyWW
ElsRUkFz4DTp8jwlz23o9rZ0jx9chD/dgm4R1efFgCPpYCKZTpGFZdts9U1kQFjy
QGY9/TPXbBAM6Zc03BO92pW55rELMpaD6zdFsxRQxi4vv72nRYY0MOxsNZ8CwR4G
crsSMpXSRLMNmI7fe1gh5VoDgU8t8P6NpEnf8gg6PDdMwywPwu1X0A0+svbKrepr
BbTP58SMcsCz68x393kFyXZ+l5pIXUp0YxkvQQIDAQABAoIBAQDH3tc+y6mdssMp
I+PtOx1jj0CMT/kWjlFFN1aDHMgKEyFmir/PFe/J98CnSEMSRVTuLCDmDb2sfvho
yeeRYq0YzmBeTYzUvfIsaQvitRrqhHpRJgjLYLxfzMeLAB2MTa2wIaUc3r7/AckP
hMyyoHC59iXX/iAwXi9aZg7RJgET49ipqsKQcJidK3Cn+7Fw9B3MurSyCYRcerI9
usY9UxpVe1EZWvB5GNOEtZckwamRX9b/sYGUeOPROGsyx+y52XnYcBq/6GbYGABS
2QLT2QL7XKEy8TkeyrXQHLpRRkpWHAMd3H31cCNnx0XWWYsJppoLXCFT9O9Uq251
UrGpxbHRAoGBAP50/x8tV3H81/BliukWCf5wYwp8jKytFFBTgH2ej3uSNF2IlQXU
kSkYBxuiaKGENc+XS1FNS0T1aS5A462flMGPPOZ8w4te6gHeec6REdMC8uIfmEdh
1+R4w/gR2DruzOOMPN66iEzYhD+g/5QrRahVlbxLVbuZgB47TDBNjLJzAoGBAPD0
nn/ff53vOietxXJnZmyesHzvnYOZ9yF4vb7jq0rYtWFw9JRqQniI7z9glVyf9FkB
OquujXny9Iaa0L51mx4eiX7seg212C+PaePEqGm0bQpNBxCJ/vn6juD/V3eHZX4W
KkNSKp3yPJXZrViUid1FtEU0Z6G22R/2cCTofEZ7AoGBAO0OFCt4c1HnS0lTYDE7
7f2TuEEpvWiVKiqXUEo3cNafY5eLycGPwdh14RFWoYFviS4ndex9RNUuiFml7DZx
SAV3KzZTH111BC7Pk8zki6V4xsvwwU4nEhlwhKlT/o0QseJ/YKnjP13QDIy2scPY
+GEVspSj3nASVjBT7+vEI4KPAoGAF7MXu+ARv0j+YVS4LO56pohdN4yh44XLRuGH
WDUwbeYuwOzJQafJ7e0aCxPG3RtmfzKdwLEkfTAmWO71RSZwIWBDidZckuil4Nes
RJjdL7htWSwGW9wW1iOM1hiHU9xfYS1w7rowMuTWjK6iXCoP/VGTz5K99qvzYy9s
DFVJk+0CgYEAz4/E3Ib5rD2zH0fTplqXfAXBi+JiUOPcfSvIPNQbcw6Et7B+Kgdw
l8srJQPeHFHuZf9wo6e2ZdGz5AtK7EYS7humCNE0Ll7GdgMx9tLyNplHTK2yPT0f
6szoiM4TYEfbuC3JsnuJSn7FDtSYCpWMsmU0Br/4ZJ5vn/nAQ/xrZrU=
-----END RSA PRIVATE KEY-----
      '';    
      hostECDSAKey = ''
-----BEGIN RSA PRIVATE KEY-----
MIIEpQIBAAKCAQEA74DUO7Pfw+ton7P4hBrvnHPgmXTWmLPHGTkHccuXG7TJgU1M
t4M5deWTSiD2q0e5ZKQowGQ5HZ9zFt8ki0W8dq7NwCUMf73T5kolA6fXQcVrZyWW
ElsRUkFz4DTp8jwlz23o9rZ0jx9chD/dgm4R1efFgCPpYCKZTpGFZdts9U1kQFjy
QGY9/TPXbBAM6Zc03BO92pW55rELMpaD6zdFsxRQxi4vv72nRYY0MOxsNZ8CwR4G
crsSMpXSRLMNmI7fe1gh5VoDgU8t8P6NpEnf8gg6PDdMwywPwu1X0A0+svbKrepr
BbTP58SMcsCz68x393kFyXZ+l5pIXUp0YxkvQQIDAQABAoIBAQDH3tc+y6mdssMp
I+PtOx1jj0CMT/kWjlFFN1aDHMgKEyFmir/PFe/J98CnSEMSRVTuLCDmDb2sfvho
yeeRYq0YzmBeTYzUvfIsaQvitRrqhHpRJgjLYLxfzMeLAB2MTa2wIaUc3r7/AckP
hMyyoHC59iXX/iAwXi9aZg7RJgET49ipqsKQcJidK3Cn+7Fw9B3MurSyCYRcerI9
usY9UxpVe1EZWvB5GNOEtZckwamRX9b/sYGUeOPROGsyx+y52XnYcBq/6GbYGABS
2QLT2QL7XKEy8TkeyrXQHLpRRkpWHAMd3H31cCNnx0XWWYsJppoLXCFT9O9Uq251
UrGpxbHRAoGBAP50/x8tV3H81/BliukWCf5wYwp8jKytFFBTgH2ej3uSNF2IlQXU
kSkYBxuiaKGENc+XS1FNS0T1aS5A462flMGPPOZ8w4te6gHeec6REdMC8uIfmEdh
1+R4w/gR2DruzOOMPN66iEzYhD+g/5QrRahVlbxLVbuZgB47TDBNjLJzAoGBAPD0
nn/ff53vOietxXJnZmyesHzvnYOZ9yF4vb7jq0rYtWFw9JRqQniI7z9glVyf9FkB
OquujXny9Iaa0L51mx4eiX7seg212C+PaePEqGm0bQpNBxCJ/vn6juD/V3eHZX4W
KkNSKp3yPJXZrViUid1FtEU0Z6G22R/2cCTofEZ7AoGBAO0OFCt4c1HnS0lTYDE7
7f2TuEEpvWiVKiqXUEo3cNafY5eLycGPwdh14RFWoYFviS4ndex9RNUuiFml7DZx
SAV3KzZTH111BC7Pk8zki6V4xsvwwU4nEhlwhKlT/o0QseJ/YKnjP13QDIy2scPY
+GEVspSj3nASVjBT7+vEI4KPAoGAF7MXu+ARv0j+YVS4LO56pohdN4yh44XLRuGH
WDUwbeYuwOzJQafJ7e0aCxPG3RtmfzKdwLEkfTAmWO71RSZwIWBDidZckuil4Nes
RJjdL7htWSwGW9wW1iOM1hiHU9xfYS1w7rowMuTWjK6iXCoP/VGTz5K99qvzYy9s
DFVJk+0CgYEAz4/E3Ib5rD2zH0fTplqXfAXBi+JiUOPcfSvIPNQbcw6Et7B+Kgdw
l8srJQPeHFHuZf9wo6e2ZdGz5AtK7EYS7humCNE0Ll7GdgMx9tLyNplHTK2yPT0f
6szoiM4TYEfbuC3JsnuJSn7FDtSYCpWMsmU0Br/4ZJ5vn/nAQ/xrZrU=
-----END RSA PRIVATE KEY-----
      '';    
      authorizedKeys = [
        "AUTHORIZED_KEY_PUBLIC"
      ];
    };
  };
  boot.loader.systemd-boot.enable = true;
  boot.loader.efi.canTouchEfiVariables = true;
  services = {
    openssh = {
      enable = true;
      forwardX11 = true;
    };
    xserver = {
      enable = true;
      windowManager.i3.enable = true;
      libinput.enable = true;
    };
  };
  security.sudo.wheelNeedsPassword = false;
  users.mutableUsers = false;
  users.extraUsers.user = {
    isNormalUser = true;
    uid = 1000;
    extraGroups = [ "wheel" ];
    hashedPassword = "HASHED_PASSWORD";
    packages = [
      (import ./custom/secrets/default.nix { inherit pkgs; })
    ];
    openssh.authorizedKeys.keys = [
      "AUTHORIZED_KEY_PUBLIC"
    ];
  };
  system.stateVersion = "18.03";
}
